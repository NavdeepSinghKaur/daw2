Desenvolupar una aplicació web social amb CodeIgniter 4 de microblogging similar a Twitter/X que permeti la publicació de contingut multimèdia, gestió d'usuaris i interacció mitjançant fils de comentaris.

1. Requisits Tècnics Transversals
Framework: CodeIgniter 4.

Base de Dades: MySQL/MariaDB. L'estructura s'ha de crear obligatòriament mitjançant Migrations.

Dades de prova: Cal incloure Seeds per generar usuaris i piwlades inicials per facilitar la correcció.

Front-end: Ús del framework Bootstrap per a la maquetació responsive.

Arquitectura: Estricte compliment del patró MVC estricte.

2. Gestió d'Usuaris i Seguretat
Registre: Formulari amb validació de dades (CodeIgniter Validation).

Camps: Usuari, email, contrasenya (xifrada amb password_hash).

Anti-Bot: Implementació obligatòria d'un Captcha (Math captcha propi).

Login: Sistema d'autenticació per sessions.

Rols:

Usuari estàndard: Pot publicar, editar les seves coses i comentar.

Admin: Pot editar/esborrar qualsevol contingut del sistema.

3. Funcionalitat de les Piwlades (Posts)
Contingut:

Text amb suport per a Markdown (negretes, llistes, enllaços). Nota: No es permet HTML pur per evitar XSS.

Pujada de fitxers: Imatges (JPG/PNG) que es mostrin com a galeria (estil Instagram) o fitxers generals per descarregar.

Identificació Única (UUID):

Les Piwlades no s'han d'accedir per ID numèric a la URL, sinó per UUID.

Ruta exemple: http://localhost/piw/123e4567-e89b-12d3-a456-426614174000

Edició Temporal:

L'autor només pot editar o esborrar la seva piwlada durant els 30 minuts posteriors a la publicació. Passat aquest temps, el botó ha de desaparèixer o donar error.

Privacitat:

Mode "Esborrany/Privat": Una piwlada marcada com a privada només és visible per l'autor i els administradors.

4. Sistema de Comentaris (Fils)
Estructura: Els comentaris tècnicament són també "Piwlades" però vinculades a una piwlada "pare" (parent_id).

Visualització:

S'han de mostrar sota la piwlada principal.

Han d'estar paginats (ex: mostrar de 10 en 10).

Integritat referencial: Si s'esborra una Piwlada pare, el sistema ha d'eliminar automàticament tots els seus comentaris (Cascading Delete).

5. Extres i Millores (Opcionals per pujar nota)
Multi-idioma: Sistema de localització de CI4 per tenir la web en Català, Castellà i Anglès.

Gestor Multimèdia: Un panell on l'usuari pugui veure totes les imatges que ha pujat històricament i reutilitzar-les en noves piwlades.

Exportació PDF: Generar un PDF amb el fil complet d'una conversa (Piwlada original + comentaris).

2FA (Segon Factor): Els usuaris poden activar opcionalment el 2FA emprant TOTP (Google Authenticator). Es permet l'ús de llibreries de composer per a la generació del QR i validació del codi.
Tips o notes tècniques
Sobre UUID: A CodeIgniter 4 podeu fer servir la classe CodeIgniter\I18n\Time per controlar els 30 minuts, però per generar UUIDs potser necessiteu un helper o una funció nativa de PHP 8.

Sobre Rutes: Podeu fer servir els placeholders personalitzats a app/Config/Routes.php per acceptar el format UUID:

PHP
$routes->addPlaceholder('uuid', '[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}');
$routes->get('piw/(:uuid)', 'PiwladaController::view/$1');
Sobre Markdown: Podeu fer servir una llibreria markdown instal·lable via composer